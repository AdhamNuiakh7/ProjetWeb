<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.0/css/boxicons.min.css"
    integrity="sha512-pVCM5+SN2+qwj36KonHToF2p1oIvoU3bsqxphdOIWMYmgr4ZqD3t5DjKvvetKhXGc/ZG5REYTT6ltKfExEei/Q=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/5.3.45/css/materialdesignicons.css"
    integrity="sha256-NAxhqDvtY0l4xn+YVa6WjAcmd94NNfttjNsDmNatFVc=" crossorigin="anonymous" />

    <div class="navbar" style="padding: 0.5rem 3rem;margin-top: 8px;">
        <div class="logo">
        <img src="./assets/logo.png" width="125px">
        </div>
        <nav>
            <ul id="MenuItems">
                <li><a [routerLink]="['/acceuil']"  href="#">Acceuil</a></li>
                <li><a href="#">Ouvriers</a></li>
            
                <li><a href="#">About</a></li>
           	
            </ul>
        </nav>
    
        
    </div>


<div class="container" id="main-container">
    <div class="row align-items-center">
        <div class="col-md-6">
            <div class="mb-3">
                <h5 class="card-title">Ouvriers List <span class="text-muted fw-normal ms-2">{{clients?.length}}</span>
                </h5>
            </div>
        </div>
        <div class="col-md-6">
            <div class="d-flex flex-wrap align-items-center justify-content-end gap-2 mb-3">
                <div>
                    <ul class="nav nav-pills">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="top"
                                title="List"><i class="bx bx-list-ul"></i></a>
                        </li>

                    </ul>
                </div>
                <div>
                    <a data-bs-toggle="modal" data-bs-target=".add-new" class="btn btn-primary "
                        (click)="onOpenModal(null, 'add')" style="color: white;"><i class="bx bx-plus me-1"></i> Add
                        New</a>
                </div>
               
            </div>
        </div>
    </div>
    <div class="col">


        <div class="row">
            <div *ngFor="let client of clients" class="col-xl-3 col-sm-6">
                <div class="card">
                    <div class="card-body">
                        
                        <div class="d-flex align-items-center">
                            <div><img src="{{client?.imageUrl}}" alt=""
                                    class="avatar-md rounded-circle img-thumbnail" /></div>
                            <div class="flex-1 ms-3">
                                <h5 class="font-size-16 mb-1"><a href="#" class="text-dark">{{client?.name}}</a></h5>
                                <span class="badge badge-soft-success mb-0">{{client?.companyName}}</span>
                            </div>
                        </div>
                        <div class="mt-3 pt-1">
                            <p class="text-muted mb-0"><i
                                    class="mdi mdi-phone font-size-15 align-middle pe-2 text-primary"></i>
                                {{client?.phone}}</p>
                            <p class="text-muted mb-0 mt-2"><i
                                    class="mdi mdi-email font-size-15 align-middle pe-2 text-primary"></i>
                                {{client?.email}}</p>
                            <p class="text-muted mb-0 mt-2"><i
                                    class="mdi mdi-google-maps font-size-15 align-middle pe-2 text-primary"></i>
                                {{client?.address}}</p>
                        </div>
                        <div class="d-flex justify-content-end pt-4">
                            <button type="button" class="btn btn-primary " (click)="onOpenModal(client, 'edit')"><i
                                    class="bx bx-edit me-1"></i></button>
                            <span style="margin-right: 4px;"></span>
                            <button type="button" class="btn btn-danger ms-4" (click)="onOpenModal(client, 'delete')"><i
                                    class="bx bx-trash me-1"></i></button>
                        </div>
                    </div>
                </div>
            </div>



        </div>



    </div>

    <!-- Add Employee Modal -->
    <div class="modal fade" id="addClient" tabindex="-1" role="dialog" aria-labelledby="addClient" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addClient">Add Client</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="margin-top: -10px;">
                    <form    #addForm="ngForm" (ngSubmit)="onAddClient(addForm)">
                        <div class="form-group" style="margin-bottom: 5px;margin-top: -8px;">
                            <label for="name">Name</label>
                            <input type="text" ngModel name="name" class="form-control" id="name" placeholder="Name"
                                required>
                        </div>
                        <div class="form-group" style="margin-bottom: 5px;">
                            <label for="email">Email Address</label>
                            <input type="email" ngModel name="email" class="form-control" id="email" placeholder="Email"
                                required>

                        </div>
                        <div class="form-group" style="margin-bottom: 5px;">
                            <label for="phone">Company Name</label>
                            <input type="text" ngModel name="companyName" class="form-control" id="companyName"
                                placeholder="Company Name" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 5px;">
                            <label for="phone">Phone</label>
                            <input type="text" ngModel name="phone" class="form-control" id="phone" placeholder="Phone"
                                required>
                        </div>
                        <div class="form-group" style="margin-bottom: 5px;">
                            <label for="phone">Adresse</label>
                            <input type="text" ngModel name="address" class="form-control" id="address"
                                placeholder="address" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 5px;">
                            <label for="phone">Image URL</label>
                            <input type="text" ngModel name="imageUrl" class="form-control" id="imageUrl"
                                placeholder="Image URL" required>
                        </div>
                        <div class="modal-footer">
                            <button type="button" id="add-employee-form" class="btn btn-secondary"
                                data-dismiss="modal">Close</button>
                            <button [disabled]="addForm.invalid" type="submit" class="btn btn-primary">Save
                                changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!-- Edit Modal -->
    <div class="modal fade" id="updateClient" tabindex="-1" role="dialog" aria-labelledby="updateClient"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="updateClient">Edit Employee </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form #editForm="ngForm">
                        <div class="form-group" style="margin-bottom: 5px;margin-top: -8px;">
                            <label for="name">Name</label>
                            <input type="text" ngModel="{{editClient?.name}}" name="name" class="form-control" id="name"
                                placeholder="Name" required>
                        </div>
                        <input type="hidden" ngModel="{{editClient?.id}}" name="id" class="form-control" id="id"
                            placeholder="Email">
                        <input type="hidden" ngModel="{{editClient?.clientCode}}" name="userCode" class="form-control"
                            id="userCode" placeholder="Email">
                        <div class="form-group" style="margin-bottom: 5px;">
                            <label for="email">Email Address</label>
                            <input type="email" ngModel="{{editClient?.email}}" name="email" class="form-control"
                                id="email" placeholder="Email" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 5px;">
                            <label for="phone">Company Name</label>
                            <input type="text" ngModel="{{editClient?.companyName}}" name="companyName"
                                class="form-control" id="companyName" placeholder="Company Name" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 5px;">
                            <label for="phone">Phone</label>
                            <input type="text" ngModel="{{editClient?.phone}}" name="phone" class="form-control"
                                id="phone" placeholder="Phone" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 5px;">
                            <label for="phone">Adresse</label>
                            <input type="text" ngModel="{{editClient?.address}}" name="address" class="form-control"
                                id="address" placeholder="address" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 5px;">
                            <label for="phone">Image URL</label>
                            <input type="text" ngModel="{{editClient?.imageUrl}}" name="imageUrl" class="form-control"
                                id="imageUrl" placeholder="Image URL" required>
                        </div>
                        <div class="modal-footer">
                            <button type="button" id="" data-dismiss="modal" class="btn btn-secondary">Close</button>
                            <button (click)="onUpdateClient(editForm.value)" data-dismiss="modal"
                                class="btn btn-primary">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Modal -->
    <div class="modal fade" id="deletClient" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deletClient">Delete Client</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete Client {{deletClient?.name}} ?</p>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                        <button (click)="onDeleteClient(deletClient!.id)" class="btn btn-danger"
                            data-dismiss="modal">Yes</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>